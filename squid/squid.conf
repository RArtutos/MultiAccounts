# Basic port configuration
http_port 3128
visible_hostname streaming-proxy

# Disable IPv6
dns_v4_first on
# Disable IPv6 DNS lookups
dns_nameservers 8.8.8.8 8.8.4.4

# Memory and cache settings
cache_mem 256 MB
maximum_object_size 512 MB
cache_dir ufs /var/spool/squid 1000 16 256

# Logging configuration
access_log daemon:/var/log/squid/access.log combined
cache_log /var/log/squid/cache.log
cache_store_log none

# Basic ACLs
acl SSL_ports port 443
acl Safe_ports port 80 443
acl CONNECT method CONNECT

# Access rules
http_access deny !Safe_ports
http_access deny CONNECT !SSL_ports
http_access allow all

# Cache patterns
refresh_pattern ^ftp: 1440 20% 10080
refresh_pattern ^gopher: 1440 0% 1440
refresh_pattern -i (/cgi-bin/|\?) 0 0% 0
refresh_pattern . 0 20% 4320

# Cookie handling
request_header_access Cookie allow all
request_header_access Set-Cookie allow all

# Additional security headers
request_header_access X-Forwarded-For deny all
request_header_access Via deny all
request_header_access Cache-Control deny all

# PID file location
pid_filename /var/run/squid/squid.pid